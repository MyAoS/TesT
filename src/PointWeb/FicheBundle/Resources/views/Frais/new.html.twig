{% extends 'PointWebFicheBundle::base.html.twig' %}

{% block content %}
    <h1>Frais creation</h1>

{{ form_start(form, {'attr': {'class':'form-horizontal' }}) }}
<fieldset>
    <div class="col-lg-9 table-responsive table-cubage" data-target="1">
        <table class="records_list table table-bordered table-hover table-striped">
            <thead>
            <tr>
                <th>{{ app.user.fullname }}</th>
                <th>Quantité</th>
                <th>Prix</th>
                <th>Total</th>
            </tr>
            </thead>
            <tbody>
            <tr >
                <td><h5>Nuité</h5></td>
                <td><div class="col-lg-6 quantite" > {{ form_errors(form.qtNuit) }}{{ form_widget(form.qtNuit) }}</div></td>
                <td><div class="col-lg-6 prix"> {{ form_errors(form.prixNuit) }}{{ form_widget(form.prixNuit) }}</div></td>
                <td><div class="col-lg-6"> <div class="container"></div> </div></td>
            </tr>
            </tbody>
            <tbody>
            <tr>
                <td><h5>Repas</h5></td>
                <td><div class="col-lg-6"> {{ form_errors(form.qtRepas) }}{{ form_widget(form.qtRepas) }}</div></td>
                <td><div class="col-lg-6"> {{ form_errors(form.prixRepas) }}{{ form_widget(form.prixRepas) }}</div></td>
                <td><div class="col-lg-6"> {{ form_errors(form.totalRepas) }}{{ form_widget(form.totalRepas) }}</div></td>
            </tr>
            </tbody>
            <tbody>
            <tr>
                <td><h5>Kilomètrage</h5></td>
                <td><div class="col-lg-6"> {{ form_errors(form.qtKm) }}{{ form_widget(form.qtKm) }}</div></td>
                <td><div class="col-lg-6"> {{ form_errors(form.prixKm) }}{{ form_widget(form.prixKm) }}</div></td>
                <td><div class="col-lg-6"> {{ form_errors(form.totalKm) }}{{ form_widget(form.totalKm) }}</div></td>
            </tr>
            </tbody>
            <tbody>
            <tr>
                <td><h5>Total</h5></td>
                <td><div class="col-lg-6 "></div></td>
                <td><div class="col-lg-6"></div></td>
                <td><div class="col-lg-6"> {{ form_errors(form.total) }}{{ form_widget(form.total) }}</div></td>
            </tr>
            </tbody>

            </table>
        </div>

</fieldset>
    {{ form_end(form) }}
        <ul class="record_actions">
    <li>
        <a href="{{ path('admin_frais') }}">
            Back to the list
        </a>
    </li>
</ul>


    <script>
        $(".table-cubage").each(function (i, val) {
            $(val).change(function (e) {
                e.preventDefault();
                var test = $('.quantite').val()*$('.prix').val();
                $('.container').html(test);
                var cat = target.split("-");
                var total = 0;
                $(".resultat").each(function (j, value) {
                    if ($(value).html()) {
                        total = total + parseFloat($(value).html());
                    }
                });
            });
        });
    </script>
{% endblock %}
